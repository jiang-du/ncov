# 西安电子科技大学晨午晚检自动填报工具

本代码参考[HPShark/xdu_chenwuwanjian.git](https://github.com/HPShark/xdu_chenwuwanjian)和[abadfox233/ncov](https://github.com/abadfox233/ncov), [cunzao/ncov](https://github.com/cunzao/ncov)的作品。感谢大佬们的无私奉献。本代码仅供学习交流，请勿擅自拷贝给他人使用。

本项目支持西电北校区/南校区的本科生、硕士生、博士生、教职工，已新增支持广州研究院产教融合专硕，预留未来对杭州研究院新生的支持，建议在校园网环境下运行。

## 项目依赖

* python >= 3
* requests 库

## 使用方法

### Step 1 环境配置：在python下安装requests库

Linux系统：

```bash
pip3 install requests -i https://pypi.tuna.tsinghua.edu.cn/simple
```

Windows系统：

```bash
pip install requests -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### Step 2 下载本代码，解压，在代码所在目录运行

Linux系统：

```bash
python3 main.py
```

Windows系统：

```bash
python main.py
```

然后保持一直运行，即可自动填报。

## 服务器使用

有自己的服务器的时候也可以使用这个方法。

配置好配置文件(把`data/config.json.bak`改名为`data/config.json`)后运行：

```bash
python3 main.py
```

至于如何后台运行请[百度一下](http://www.baidu.com/)

## 更新日志

2021-03-11 更新日志 (1.0版本)：

1. 更人性化的设计：同一账户重复上报时不再按照报错的处理方式尝试3次，而是自动到下个周期恢复自动上报。

2. 修复了一个BUG，该BUG曾导致广州研究院部分专硕定位失效。

2021-03-11 更新日志：

1. 增加了地理信息库，添加了广州研究院，并预留了后续对杭州研究院的支持。

2. 支持自动识别广州研究院产教融合专硕的学号。

3. 对学硕/博士自动识别是否在长安/雁塔校区/广州研究院(测试功能)。

4. 面向腾讯云函数的版本分支独立出来，后续更新不会影响之前版本。

2020-08-26 更新日志：

1. 更人性化的设计：程序启动时立即上报一次。

2. 每天晚上随机初始化下一天上报的时刻，以避免多人同时使用对服务器的负载压力。

3. 上报失败时，自动尝试重新上报(最大次数3次)；新增了每次上报后的冷却(cd)时间为180秒。

4. 除了南北校区外，新增了在校外的地点选择(出差/旅游模式)。

5. 支持自由选择是否开启夜间睡眠模式，更加低碳环保。

2020-08-27 更新日志：

1. 优化了代码逻辑结构，主函数更简洁。

2. 程序启动时自动检查是否可以联网，并根据需要抛出异常。

3. 每小时输出一次当前时刻(夜间免打扰时间段除外)，以便用户确认程序在正常运行，使用体验更棒。

2020-09-02 更新日志：

1. 更简洁的功能设计，本地运行时，无需额外编辑配置即可一键运行。

2. 本地使用时，输入学工号自动判断`教职工`/`本科生`/`研究生`，并支持根据学院自动识别南北校区的定位。

3. 增强了隐私保护特性。

   - 用户可自由选择在硬盘存储用户名密码，或者首次运行时输入(不保存在硬盘)，输入密码后自动清屏(可支持windows和linux平台)。

   - 即使在不保存密码的情况下，也支持第一次使用之后默认开通免密登录。

   - 登录后立即销毁内存空间中的密码，采用逐字节擦写技术，更大限度的隐私保护。

4. 优化了代码运行的运行逻辑，尽可能的减少了对计算资源和网络带宽的开销。

5. 将层文件改为链接下载的方式，更节省git代码版本控制的资源开销。
